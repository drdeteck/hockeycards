<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- MS APPLICATION -->
    <meta name="msapplication-TileColor" content="#243847" />
    <meta name="msapplication-TileImage" content="" />
    <!-- CHROME THEME COLOR -->
    <meta name="theme-color" content="#243847" />
    <title>Phil's Hockey Cards Collection</title>
    <!-- CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel='stylesheet' href='styles/style.css?ver=0.0.1' type='text/css' media='all' />
    <link rel='stylesheet' href='styles/card-grid.css?ver=0.0.1' type='text/css' media='all' />
    <link rel='stylesheet' href='styles/card-grid-header.css?ver=0.0.1' type='text/css' />
    <link rel='stylesheet' href='styles/main-header.css?ver=0.0.1' type='text/css' media='all' />
    <link rel='stylesheet' href='styles/controls.css?ver=0.0.1' type='text/css' media='all' />
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="raw-data.js"></script>
    <script src="app.js"></script>
</head>

<body>
    <div class="header">
        <div class="header-control-row">
            <a title="Back to homepage" href="#home" class="header-logo">
                <span class="logo-title">Phil's Hockey Cards Collection</span>
            </a>
            <div class="header-links">
                <a href="#home" class="btn btn-outline-light btn-sm">Home</a>
                <a href="#about" class="btn btn-outline-light btn-sm">About</a>
                <a href="/login" class="btn btn-outline-light btn-sm disabled">
                    <span>login</span>
                </a>
            </div>
        </div>
    </div>
    <div class="main">
        <!-- Menu Rows -->
        <div class="main-inner"
            data-bind="template: {name: 'menu-row-template', foreach: Root}, visible: CurrentRoute() !== 'about'"></div>

        <!-- HOME VIEW: Cards Grid -->
        <div data-bind="visible: CurrentRoute() === 'home' || $root.CurrentCollection()">
            <!-- bind directly to the 'cards' array on the active collection -->
            <div class="collection" data-bind="with: $root.CurrentCollection">
                <h2 class="card-grid-header">
                    <span class="card-grid-header-inner">
                        <span class="card-grid-header-content">
                            <!-- inside 'with', $data is the collection object -->
                            <span data-bind="text: name">No set</span>
                            <span class="card-grid-header-dot">• </span>
                            <a target="_blank"
                                data-bind="text: (cards || []).length + ' cards', attr: { href: $root.CurrentCollection()['tcdb-href'] || '#' }">0
                                card</a>
                        </span>
                    </span>
                </h2>
                <div class="card-grid">
                    <ul class="card-grid-inner" data-bind="template: {name: 'card-template', foreach: cards}"></ul>
                </div>

                <!-- renders any inner sets / inserts (e.g. Holograms) -->
                <!-- ko if: $root.CurrentCollection() && $root.CurrentCollection().inserts && $root.CurrentCollection().inserts.length -->
                <!-- ko foreach: $root.CurrentCollection().inserts -->
                <h2 class="card-grid-header">
                    <span class="card-grid-header-inner">
                        <span class="card-grid-header-content">
                            <span data-bind="text: name">Insert</span>
                            <span class="card-grid-header-dot">• </span>
                            <a target="_blank"
                                data-bind="text: (cards || []).length + ' cards', attr: { href: $data['tcdb-href'] || '#' }">0
                                card</a>
                        </span>
                    </span>
                </h2>
                <div class="card-grid">
                    <ul class="card-grid-inner" data-bind="template: {name: 'card-template', foreach: cards}">
                    </ul>
                </div>
                <!-- /ko -->
                <!-- /ko -->
            </div>
        </div>

        <!-- ABOUT VIEW -->
        <div data-bind="visible: CurrentRoute() === 'about'" style="padding: 20px;">
            <h1>About</h1>
            <p>This is a Knockout.js application for browsing Phil's hockey card collection.</p>
            <p><a href="#home" style="color: #0066cc;">Back to Home</a></p>
        </div>

        <!-- DEFAULT/404 VIEW -->
        <div data-bind="visible: CurrentRoute() !== 'home' && CurrentRoute() !== 'about' && !$root.CurrentCollection()"
            style="padding: 20px;">
            <h1>Page Not Found</h1>
            <p>Route: <span data-bind="text: CurrentRoute()"></span></p>
            <p><a href="#home" style="color: #0066cc;">Back to Home</a></p>
        </div>
    </div>
    <footer id="footer" class="footer">
        <div class="inner-flex">
            <p>Card data and images are presented for personal collection reference.</p>
        </div>
    </footer>
    <!--------------->
    <!-- Templates -->
    <!--------------->
    <!-- ROW -->
    <script type="text/html" id="menu-row-template">

        <div class="main-header">
            <div class="inner-flex">
                <div class="main-header-collections">
                    <span class="collection-control-title" data-bind="text: $data.name"></span>
                    <div class="collections-inner" data-bind="template: {name: 'menu-group-template', foreach: $data.groups}"></div>
                </div>
            </div>
        </div>
    
        </script>
    <!-- Group -->
    <script type="text/html" id="menu-group-template">

        <div class="collection-group">
            <span class="collection-group-title" data-bind="text: $data.text"></span>
            <!-- render each control with the template defined on the row (grandparent) -->
            <div class="btn-group btn-group-toggle" data-toggle="buttons" data-bind="foreach: $data.controls">
                <!-- use containerless syntax so labels are direct children of the btn-group -->
                <!-- ko template: {name: $parents[1].template, data: $data} -->
                <!-- /ko -->
            </div>
        </div>
    
        </script>
    <!-- Button - Text -->
    <script type="text/html" id="button-text-template">

        <label class="btn btn-outline-light btn-sm" data-bind="css: {active: $root.CurrentCollectionKey() === $data.key, disabled: $data.isDisabled}">
            <input type="radio" name="options" data-bind="checked: $root.CurrentCollectionKey, attr:{value: $data.key}">
            <span class="" data-bind="text: $data.displayName"></span>
        </label>
    </script>
    <script type="text/html" id="card-template">

        <!-- expects a single card object in $data -->
    <li class="card-grid-item" data-bind="css: { 'card-landscape': $data.orientation === 'landscape' }">
        <a class="card-grid-item-card" data-bind="css: { 'card-landscape': $data.orientation === 'landscape' },
            attr: { href: ($data['tcdb-href'] || $data['image-front'] || $root.ParseImageUri($data) || '#') }">
            <span class="card-grid-item-invisible-label" aria-hidden="true" data-bind="text: name"></span>
            <div class="card-grid-item-card-faces">
                <div class="card-grid-item-card-front">
                    <img class="card" data-bind="attr: { 
                            src: $root.ParseImageUri($data),
                            alt: ($data.name || '') + ' (' + ($data['set'] || '') + ')',
                            title: ($data.name || '') + ' (' + ($data.number || 'NNO') + ')' }">
                </div>
            </div>
            <!-- price removed: no prices in this project -->
        </a>
    </li>

    </script>
    <script>
        //Start the App!
        HCHB.App.Init();
    </script>
</body>

</html>